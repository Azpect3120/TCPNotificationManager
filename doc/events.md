# Events 

<!--toc:start-->
- [Events](#events)
  - [Base Event Structure](#base-event-structure)
  - [Server Sent Events](#server-sent-events)
    - [Accepted Connection](#accepted-connection)
    - [Refused Connection](#refused-connection)
  - [Client Send Events](#client-send-events)
<!--toc:end-->


## Base Event Structure

All events will have a standard structure. Events will also contain specific data based on the event type.

```json
{
    "event": "event_name",
    "id": "sender_id",
    "content": {
        "key": "value",
        ...
    },
    "timestamp": "timestamp"
}
```

## Server Sent Events

### Accepted Connection
When a client attempts to connect to the server, the server will either accept or refuse the connection. 
If the connection is accepted, the server will send an `connection_accepted` event to the client.

The `id` field will contain the ID of the server and the data will contain the client's new ID. The ID will
be generated by the server. The client does not need to do any work, just receive the message and save
the ID provided.

```json
{
    "event": "connection_accepted",
    "id": "server_id",
    "content": {
        "client_id": "client_id",
    },
    "timestamp": "timestamp"
}
```


### Refused Connection

When a client attempts to connect to the server, the server will either accept or refuse the connection. 
If the connection is accepted, the server will send an `connection_refused` event to the client.

The `id` field will contain the ID of the server and the data will contain the reason for the refusal, and
a status code to identify the error.

```json
{
    "event": "connection_refused",
    "id": "server_id",
    "content": {
        "code": "code",
        "reason": "reason",
    },
    "timestamp": "timestamp"
}
```

For details on the status codes and reasons, see the [Error Codes](error_codes.md) page.


## Client Send Events
